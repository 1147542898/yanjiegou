{extend name="Public:common" /}
{block name="content"}
<div class="layui-fluid">
<div class="layui-row layui-col-space15">
<div class="layui-card">
<div class="layui-card-body ">
    <div class="layui-input-inline">
        <cascader id="demo1"></cascader>
        <button class="layui-btn">提交</button>
    </div>
    <div class="layui-container" style="margin-top: 15px;">
        <div id="root"></div>
        <div id="root1"></div>
    </div>
    <div class="layui-input-block" style="text-align: center;margin-top: 50px">
            <a class="layui-btn right">提交数据</a>
    </div>
</div>
</div>
</div>
</div>
{/block}
{block name="js"}
<script>
    layui.config({
        base: '/static/admin/lib/layui/extend/'
    }).use(['transfer','jquery','upload','layer','ajaxCascader'], function () {
        var transfer = layui.transfer;
            $ = layui.jquery;
            cascader = layui.ajaxCascader;
        //数据源=======================================================
        // var data1 = [{'id':'10001','name':'杜甫','sex':'男'},{'id':'10002','name':'李白','sex':'男'},{'id':'10003','name':'王勃','sex':'男'},{'id':'10004','name':'李清照','sex':'男'},{'id':'10001','name':'杜甫','sex':'男'},{'id':'10002','name':'李白','sex':'男'},{'id':'10003','name':'王勃','sex':'男'},{'id':'10004','name':'李清照','sex':'男'},{'id':'10001','name':'杜甫','sex':'男'},{'id':'10002','name':'李白','sex':'男'},{'id':'10003','name':'王勃','sex':'男'},{'id':'10004','name':'李清照','sex':'男'},{'id':'10001','name':'杜甫','sex':'男'},{'id':'10002','name':'李白','sex':'男'},{'id':'10003','name':'王勃','sex':'男'},{'id':'10004','name':'李清照','sex':'男'},{'id':'10001','name':'杜甫','sex':'男'},{'id':'10002','name':'李白','sex':'男'},{'id':'10003','name':'王勃','sex':'男'},{'id':'10004','name':'李清照','sex':'男'},{'id':'10001','name':'杜甫','sex':'男'},{'id':'10002','name':'李白','sex':'男'},{'id':'10003','name':'王勃','sex':'男'},{'id':'10004','name':'李清照','sex':'男'},{'id':'10001','name':'杜甫','sex':'男'},{'id':'10002','name':'李白','sex':'男'},{'id':'10003','name':'王勃','sex':'男'},{'id':'10004','name':'李清照','sex':'男'}];
        // var data2 = [{'id':'10005','name':'白居易','sex':'男'}];
        //表格列
        var cols = [{type: 'checkbox', fixed: 'left'},{field: 'id', title: 'ID', width: 80, sort: true},{field: 'name', title: '用户名'},{field: 'sex', title: '性别'}]
        //表格配置文件
        var tabConfig = {'page':true,'limits':[10,50,100],'height':700}
        var tb1 = transfer.render({
            elem: "#root", //指定元素
            cols: cols, //表格列  支持layui数据表格所有配置
            data: [], //[左表数据,右表数据[非必填]]
            tabConfig: tabConfig //表格配置项 支持layui数据表格所有配置
        })
        //transfer.get(参数1:初始化返回值,参数2:获取数据[all,left,right,l,r],参数:指定数据字段)
        //获取数据
        $('.alls').on('click',function() {
            var data = transfer.get(tb1,'all');
            layer.msg(data)
        });
        $('.left').on('click',function () {
            var data = transfer.get(tb1,'left','id');
            layer.msg(data)
        });
        $('.right').on('click',function () {
            var data = transfer.get(tb1,'right','');
            layer.msg(data)
        });

        //=================================多级联动=========================================
            // 直接赋值模式
            cascader.load({
                elem:'#demo1'                          
                ,value:0  
                ,getChildren:function(value,callback){  
                    var data = [];                  
                    $.ajax({                         
                        url:'{:url("getcate")}?pid='+value,
                        type:'get',
                        success:function(res){
                            data = res.data;
                            for(var i in data){
                                data[i].value = data[i].id;
                                data[i].label = data[i].name;
                                delete data[i].id;
                                delete data[i].name;
                                data[i].hasChild = true;
                            }
                            callback(data);
                        }
                    });
                }      
            });
            // 监听选中的事件
            cascader.on('click','#demo2',function(){
                // 获取当前已选中的数据,可单独使用
                console.log(cascader.getChooseData('#demo2'))
            });
    });
</script>
{/block}